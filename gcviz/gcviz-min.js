/*!
 *
 * GeoCanViz viewer / Visionneuse GÃ©oCanViz
 * gcviz.github.io/gcviz/License-eng.txt / gcviz.github.io/gcviz/Licence-fra.txt
 *
 * Version: v0.0.1-development Build: 2013-12-10- 03:29 PM
 *
 */
var vmArray={},locationPath;(function(){var b,a;define(["jquery","gcviz-i18n","gcviz-func","gcviz-v-map","gcviz-v-inset","gcviz-v-header","gcviz-v-footer","gcviz-v-tbdraw","gcviz-v-tbnav","gcviz-v-tblegend"],function(j,p,f,c,q,k,n,o,h,e){var i,m,g,d,l;i=function(){var t=j(".gcviz"),s,r=t.length;b=r;a=0;d();l();while(r--){s=t[r];m(s)}};m=function(s){var r=s.getAttribute("data-gcviz");j.support.cors=true;j.ajax({url:r,crossDomain:true,dataType:"json",async:false,success:function(t){t.gcviz.mapframe.id=s.getAttribute("id");g(s,t.gcviz);console.log(p.getDict("%msg-configread"))},error:function(){console.log(p.getDict("%msg-configerr")+": "+r)}})};g=function(y,t){var x,w=j(y),r=t.mapframe,s=r.id,u=r.size,v=t.customwidgets.length;w.wrap("<section id=section"+s+' class="gcviz-section" role="map" style="width:'+u.width+"px; height:"+u.height+'px;">');x=j(document).find("#section"+s);j.extend(x,t);vmArray[s]={};vmArray[s].map=c.initialize(x);vmArray[s].header=k.initialize(x);vmArray[s].footer=n.initialize(x);if(t.toolbardraw.enable){vmArray[s].draw=o.initialize(x)}if(t.toolbarnav.enable){vmArray[s].nav=h.initialize(x)}if(t.toolbarlegend.enable){vmArray[s].legend=e.initialize(x)}if(t.insetframe.enable){vmArray[s].insets=q.initialize(x)}while(v--){}a+=1;if(a===b){j.event.trigger("gcviz-ready");window.onresize=f.debounce(function(z){},500,false)}};d=function(){var u=document.getElementsByTagName("meta"),s=u.length;while(s--){if(u[s].getAttribute("property")==="location"){locationPath=u[s].getAttribute("content")}}if(typeof locationPath==="undefined"){var r=window.location.toString(),t=r.search("GeoCanViz");if(t!==-1){locationPath=r.substring(0,r.search("GeoCanViz"))+"GeoCanViz/"}}};l=function(){j.extend(true,j.magnificPopup.defaults,{tClose:p.getDict("%mp-close"),tLoading:p.getDict("%mp-load"),gallery:{tPrev:p.getDict("%mp-prev"),tNext:p.getDict("%mp-next"),tCounter:p.getDict("%mp-count")},image:{tError:p.getDict("%mp-error")}})};return{initialize:i}})}).call(this);