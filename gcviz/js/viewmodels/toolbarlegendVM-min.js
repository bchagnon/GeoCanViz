(function(){define(["knockout","gcviz-i18n","gcviz-gislegend","gcviz-ko","esri/request"],function(g,i,b,a,f){var d,c,h,e;d=function(m,k,l){var j=function(q,o,p){var n=this;n.mymap=vmArray[o].map.map;n.tpVisible=i.getDict("%toolbarlegend-tgvis");n.init=function(){$.each(p.service,function(s,r){$.each(r.layers,function(u,t){})});n.theArray=g.observableArray(p.service);return{controlsDescendantBindings:true}};n.changeLayerVisibility=function(r,s){b.setLayerVisibility(n.mymap,r.id,$(s.target).prop("checked"));return true};n.changeServiceVisibility=function(r,s){$.each($(s.target).siblings().find(":checkbox"),function(t,u){$(u).prop("checked",s.target.checked);b.setLayerVisibility(n.mymap,u.value,$(s.target).prop("checked"))});return true};n.changeServiceOpacity=function(t,u,r){var s=t.getLayer(u);s.setOpacity(r)};n.init()};c=new j(m,k,l);g.applyBindings(c,m[0]);return c};return{initialize:d}})}).call(this);