(function(){define(["jquery","knockout","jqueryui","gcviz-i18n","gcviz-gisgraphic"],function(f,b,e,d,g){var a,c;a=function(j,h){var i=function(m,q){var r=this,l=locationPath+"gcviz/images/drawDraw.png",n=locationPath+"gcviz/images/drawText.png",t=locationPath+"gcviz/images/drawErase.png",v=locationPath+"gcviz/images/drawMeasure.png",s=locationPath+"gcviz/images/drawImport.png",p=locationPath+"gcviz/images/drawExport.png",k=vmArray[q].map.map,w=f("#"+q+"_holder_container"),o=new g.initialize(k),u=f("#gcviz-draw-inputbox");r.imgDraw=b.observable(l);r.imgText=b.observable(n);r.imgErase=b.observable(t);r.imgMeasure=b.observable(v);r.imgImport=b.observable(s);r.imgExport=b.observable(p);r.tpDraw=d.getDict("%toolbardraw-tpdraw");r.tpText=d.getDict("%toolbardraw-tptext");r.tpErase=d.getDict("%toolbardraw-tperase");r.mapid=q;r.graphic=o;u.dialog({autoOpen:false,modal:true,resizable:false,draggable:false,show:"fade",hide:"fade",closeOnEscape:true,title:d.getDict("%toolbardraw-inputbox-name"),width:400,close:function(){f("#value").val("")},buttons:[{text:"Ok",click:function(){var x=f("#value").val(),y=u.dialog("option","graphic");if(x!==""){y.drawText(x)}else{w.removeClass("gcviz-text-cursor")}f(this).dialog("close")}},{text:"Cancel",click:function(){w.removeClass("gcviz-text-cursor");f(this).dialog("close")}}]});r.init=function(){return{controlsDescendantBindings:true}};r.drawClick=function(){w.css("cursor","");w.addClass("gcviz-draw-cursor");r.graphic.drawLine()};r.textClick=function(){w.css("cursor","");w.addClass("gcviz-text-cursor");u.dialog("open");u.dialog("option",{graphic:r.graphic,mapid:r.mapid})};r.eraseClick=function(){o.erase()};r.measureClick=function(){};r.importClick=function(){};r.exportClick=function(){};r.init()};c=new i(j,h);b.applyBindings(c,j[0]);return c};return{initialize:a}})}).call(this);